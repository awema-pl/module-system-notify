/**
 * Bundle of AWEMA system-notify
 * Generated: 2020-12-04 00:42:49
 * Version: 1.2.3
 */

!function(){"use strict";var t={status:"success",timeout:5e3};var e=function(t,e,s,i,n,o,r,a,c,l){"boolean"!=typeof r&&(c=a,a=r,r=!1);var d,f="function"==typeof s?s.options:s;if(t&&t.render&&(f.render=t.render,f.staticRenderFns=t.staticRenderFns,f._compiled=!0,n&&(f.functional=!0)),i&&(f._scopeId=i),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},f._ssrRegister=d):e&&(d=r?function(){e.call(this,l(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),d)if(f.functional){var u=f.render;f.render=function(t,e){return d.call(e),u(t,e)}}else{var m=f.beforeCreate;f.beforeCreate=m?[].concat(m,d):[d]}return s};var s=e({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"system-notify",class:t.itemClass},[t.showProgress?s("div",{class:["system-notify__progress",t.notify.cssClass],style:{animationDuration:t.notify.timeout+"ms",animationPlayState:t.animationState}}):t._e(),s("div",{staticClass:"system-notify__content"},[t.notify.title?s("h4",{staticClass:"system-notify__title"},[t._v(t._s(t.notify.title))]):t._e(),s("div",{staticClass:"system-notify__message",domProps:{innerHTML:t._s(t.message)}}),t.buttons?s("div",{staticClass:"system-notify__buttons"},t._l(t.buttons,function(e,i){return s("button",{key:i,staticClass:"btn system-notify__btn",on:{click:function(s){return t.onButtonClick(e)}}},[t._v(t._s(e.text))])}),0):t._e()]),s("button",{staticClass:"system-notify__close",attrs:{type:"button",title:t.$lang.NOTIFY_CLOSE,"aria-label":t.$lang.NOTIFY_CLOSE},on:{click:function(e){return t.$emit("close")}}},[s("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 25 25"}},[s("path",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"1.06",d:"M22,22 L4,4 M22,4 L4,22"}})])])])},staticRenderFns:[]},void 0,{name:"system-notify",props:{notify:{type:Object,required:!0}},data:()=>({animationState:"running"}),computed:{itemClass(){return[this.notify.status?"is-"+this.notify.status:"",this.themeClasses&&"theme-"+this.themeClasses.join(" theme-")]},themeClasses(){let t=this.notify.theme;return t&&(Array.isArray(t)?t:t.split(",")).map(t=>t.trim())},showProgress(){return this.themeClasses&&this.themeClasses.indexOf("progress")>-1&&this.notify.timeout},message(){return function(t){const e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;for(;e.test(t);)t=t.replace(e,"");return t}(this.notify.message)},buttons(){let t=this.notify.button;return!!t&&(Array.isArray(t)?t:[t])}},methods:{onButtonClick(t){this.animationState="paused",clearTimeout(this.notify._timeout),AWEMA.ajax(t.data,t.url,t.method).then(e=>{e.success&&(e.data.message&&AWEMA.emit(`notify::${this.notify.container}:show`,{message:e.data.message}),"function"==typeof t.sended&&t.sended.call(this),this.$emit("close"))})}}},void 0,!1,void 0,void 0,void 0);let i=0;var n=e({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.stackDir?s("transition-group",{staticClass:"system-notify-container",class:["is-"+t.name,"dir-"+t.stackDir,{"has-children":t.stackArr.length}],attrs:{tag:"ul",name:"notify","aria-live":"polite","aria-relevant":"additions"}},t._l(t.stackArr,function(e){return s("li",{key:e.id,staticClass:"system-notify-container__item"},[t._t("default",[s("system-notify",{attrs:{notify:e},on:{close:function(s){return t.remove(e.id)}}})],{remove:function(){return t.remove(t.stackArr[0].id)}},e)],2)}),0):s("div",{staticClass:"system-notify-container",class:["is-"+t.name,{"has-children":t.stackArr.length}],attrs:{"aria-live":"polite","aria-relevant":"additions"}},[t._t("default",[s("transition",{attrs:{name:"notify",mode:"out-in"}},[t.stackArr[0]?s("system-notify",{key:t.stackArr[0].id,attrs:{notify:t.stackArr[0]},on:{close:function(e){return t.remove(t.stackArr[0].id)}}}):t._e()],1)],{remove:function(){return t.remove(t.stackArr[0].id)}},t.stackArr[0])],2)},staticRenderFns:[]},void 0,{name:"system-notify-container",components:{systemNotify:s},props:{name:{type:String,required:!0},stack:{type:[String,Boolean],default:"bottom"},config:Object,notify:[Array,Object]},data:()=>({stackArr:[]}),computed:{stackDir(){switch(this.stack){case"top":return"top";case"false":case!1:return!1;default:return"bottom"}}},methods:{add(t){try{!1===this.stackDir?(this.stackArr.length&&clearTimeout(this.stackArr[0]._timeout),this.stackArr=[t]):this.stackArr["top"===this.stackDir?"unshift":"push"](t),t.timeout&&"number"==typeof t.timeout&&(t._timeout=setTimeout(()=>{this.remove(t.id)},t.timeout))}catch(t){AWEMA_CONFIG.dev&&console.log(t)}},remove(t){if(void 0===t)return;let e=this.stackArr.findIndex(e=>e.id===t);return e>-1&&(clearTimeout(this.stackArr[e]._timeout),this.stackArr.splice(e,1),!0)},_createNotify(t){return i+=1,Object.assign({},this._config,this.config,t,{id:i,container:this.name})},_showHandler(t){let e=this._createNotify(t.detail);return this.add(e),e.id},_hideHandler(t){return this.remove(t.detail)}},beforeMount(){this._config=Object.assign(t,AWEMA_CONFIG.notify)},mounted(){if(AWEMA.on(`notify::${this.name}:show`,this._showHandler),AWEMA.on(`notify::${this.name}:hide`,this._hideHandler),this.notify){(Array.isArray(this.notify)?this.notify.slice():[Object.assign({},this.notify)]).forEach(t=>{t=this._createNotify(t),this.add(t)})}},beforeDestroy(){AWEMA.off(`notify::${this.name}:show`,this._showHandler),AWEMA.off(`notify::${this.name}:hide`,this._hideHandler)}},void 0,!1,void 0,void 0,void 0);var o={installed:!1,install:function(t){this.installed||(this.installed=!0,t.component("system-notify-container",n))}};function r(){AWEMA._watchedNames.push("system-notify-container");let t=document.querySelector('system-notify-container[name="default"]');t||((t=document.createElement("system-notify-container")).setAttribute("name","default"),t.className="position-bottom-right",document.body.appendChild(t)),AWEMA.notify=function(t){let e,s="default";"string"==typeof t?e={message:t}:(e=t,t.container&&(s=t.container)),AWEMA.emit(`notify::${s}:show`,e)}}var a={NOTIFY_CLOSE:"Close"};const c={name:"system-notify",version:"1.2.3",install(){AWEMA.lang=a,Vue.use(o),r(),AWEMA.on("spa::page_loaded",function(){r()})}};if(window&&"AWEMA"in window)AWEMA.use(c);else{let t="__awema_plugins_stack__";window[t]=window[t]||[],window[t].push(c)}}();
